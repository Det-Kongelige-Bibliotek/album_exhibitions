<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
    <link rel="stylesheet" href="../includes/font-awesome-4.7.0/css/font-awesome.min.css">
     <link rel="stylesheet" href="../includes/css/style.css">

    <script src="../includes/js/openseadragon.js"></script>
     <script src="../includes/js/jquery-1.11.3.min.js"></script>

   
</head>
<body>
<div id="canvas">
<div id="myInstance">
    <div id="toolbar">
  <i class="fa fa-3x fa-arrow-circle-left" aria-hidden="true" id="prev"></i>
       <i class="fa fa-3x fa-arrow-circle-right" aria-hidden="true" id="next"></i>
 

    </div>
</div>
</div>
    

<script type="text/javascript">
    
    $( document ).ready(function() {
        
        var tileSources = [
            {
                type: 'image',
                url: 'images/album_0840_4_001.jpg'
            },
            {
                type: 'image',
                url: 'images/album_0840_4_002.jpg'
            },
            {
                type: 'image',
                url: 'images/album_0840_4_003.jpg'
            },
            {
                type: 'image',
                url: 'images/album_0840_4_004.jpg'
            },
            {
                type: 'image',
                url: 'images/album_0840_4_005.jpg'
            },
            {
                type: 'image',
                url: 'images/album_0840_4_006.jpg'
            },
            {
                type: 'image',
                url: 'images/album_0840_4_007.jpg'
            },
            {
                type: 'image',
                url: 'images/album_0840_4_008.jpg'
            },
            {
                type: 'image',
                url: 'images/album_0840_4_009.jpg'
            },
            {
                type: 'image',
                url: 'images/album_0840_4_010.jpg'
            },
            {
                type: 'image',
                url: 'images/album_0840_4_011.jpg'
            },
            {
                type: 'image',
                url: 'images/album_0840_4_012.jpg'
            },
         {
                type: 'image',
                url: 'images/album_0840_4_013.jpg'
            },
            {
                type: 'image',
                url: 'images/album_0840_4_014.jpg'
            },
            {
                type: 'image',
                url: 'images/album_0840_4_015.jpg'
            },
            {
                type: 'image',
                url: 'images/album_0840_4_016.jpg'
            },
            {
                type: 'image',
                url: 'images/album_0840_4_017.jpg'
            },
            {
                type: 'image',
                url: 'images/album_0840_4_018.jpg'
            },
            {
                type: 'image',
                url: 'images/album_0840_4_019.jpg'
            },
            {
                type: 'image',
                url: 'images/album_0840_4_020.jpg'
            },
            {
                type: 'image',
                url: 'images/album_0840_4_021.jpg'
            },
            {
                type: 'image',
                url: 'images/album_0840_4_022.jpg'
            },
            {
                type: 'image',
                url: 'images/album_0840_4_023.jpg'
            },
            {
                type: 'image',
                url: 'images/album_0840_4_024.jpg'
            },
         {
                type: 'image',
                url: 'images/album_0840_4_025.jpg'
            },
            {
                type: 'image',
                url: 'images/album_0840_4_026.jpg'
            },
            {
                type: 'image',
                url: 'images/album_0840_4_027.jpg'
            },
            {
                type: 'image',
                url: 'images/album_0840_4_028.jpg'
            },
            {
                type: 'image',
                url: 'images/album_0840_4_029.jpg'
            },
            {
                type: 'image',
                url: 'images/album_0840_4_030.jpg'
            },
            {
                type: 'image',
                url: 'images/album_0840_4_031.jpg'
            },
            {
                type: 'image',
                url: 'images/album_0840_4_032.jpg'
            },
            {
                type: 'image',
                url: 'images/album_0840_4_033.jpg'
            },
            {
                type: 'image',
                url: 'images/album_0840_4_034.jpg'
            },
            {
                type: 'image',
                url: 'images/album_0840_4_035.jpg'
            },
            {
                type: 'image',
                url: 'images/album_0840_4_036.jpg'
            },
         {
                type: 'image',
                url: 'images/album_0840_4_037.jpg'
            },
            {
                type: 'image',
                url: 'images/album_0840_4_038.jpg'
            },
            {
                type: 'image',
                url: 'images/album_0840_4_039.jpg'
            },
            {
                type: 'image',
                url: 'images/album_0840_4_040.jpg'
            },
            {
                type: 'image',
                url: 'images/album_0840_4_041.jpg'
            },
            {
                type: 'image',
                url: 'images/album_0840_4_042.jpg'
            },
            {
                type: 'image',
                url: 'images/album_0840_4_043.jpg'
            },
            {
                type: 'image',
                url: 'images/album_0840_4_044.jpg'
            },
            {
                type: 'image',
                url: 'images/album_0840_4_045.jpg'
            },
            {
                type: 'image',
                url: 'images/album_0840_4_046.jpg'
            },
            {
                type: 'image',
                url: 'images/album_0840_4_047.jpg'
            },
            {
                type: 'image',
                url: 'images/album_0840_4_048.jpg'
            },
            {
                type: 'image',
                url: 'images/album_0840_4_049.jpg'
            },
            {
                type: 'image',
                url: 'images/album_0840_4_050.jpg'
            },
            {
                type: 'image',
                url: 'images/album_0840_4_051.jpg'
            },
            {
                type: 'image',
                url: 'images/album_0840_4_052.jpg'
            }];
        
      
   var viewer = OpenSeadragon({
        id: 'myInstance',
        iOSDevice: true,
        defaultZoomLevel: 0.8,
        minZoomLevel: 0.8,
        sequenceMode: true,
        immediateRender: true,
        iOSDevice : true,
        visibilityRatio: 1,
        toolbar: 'toolbar',
        previousButton: 'prev',
        nextButton: 'next',
        showNavigationControl: false,
        tileSources: tileSources
    });
            
    var previousPos;
    
    //detect id it is a swippe left or right by comparing the first and last touch position.
    var swip = function(event){
       if (Math.abs(event.position.x - previousPos.x) > 200 && Math.abs(event.position.y - previousPos.y) < 300){
         if (event.position.x < previousPos.x  && viewer.currentPage() < tileSources.length){
                //  $(".openseadragon-canvas").css({ opacity: 0 });
                viewer.goToPage(viewer.currentPage() + 1);
            }else if (event.position.x > previousPos.x  && viewer.currentPage() > 0){
               // $(".openseadragon-canvas").css({ opacity: 0 });
                 viewer.goToPage(viewer.currentPage() - 1);
            }
        }
    }
    
    //On zoom level = 1 it is a swippe, otherwise a pan inside the image
    var panOrChangePage = function(event){
        
          viewer.removeHandler('canvas-drag-end', swip);
          if (event.zoom > 1.1){
             viewer.panHorizontal = true;
             viewer.panVertical = true;
             viewer.removeHandler('canvas-drag-end', swip);
          }else{
             viewer.panHorizontal = false;
             viewer.panVertical = false;
             viewer.addHandler('canvas-drag-end', swip);
          }
    };
    
    //Add the zoomHandler to detect if the user wants to pan or swippe
    var zoomHandler = function(event){
        viewer.addHandler('zoom', panOrChangePage);
    }; 
   
    //Get the first touch position to detect if it is a swipe left or right
    viewer.addHandler('canvas-enter', function(event){
       previousPos = event.position;
    
    });
      
    //Reinialize handler on page changes
    viewer.addHandler('page', function(event){
        // $(".openseadragon-canvas").animate({opacity: '1'},"fast");
        viewer.removeHandler('zoom', panOrChangePage);
        viewer.removeHandler('canvas-drag-end', swip);
        zoomHandler();
    });
    
    zoomHandler();
        
 

        
 });
        
</script>
</body>
</html>